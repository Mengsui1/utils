(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ef0bfda"],{"159b":function(t,e,i){var s=i("da84"),n=i("fdbc"),a=i("17c2"),o=i("9112");for(var r in n){var h=s[r],c=h&&h.prototype;if(c&&c.forEach!==a)try{o(c,"forEach",a)}catch(u){c.forEach=a}}},"17c2":function(t,e,i){"use strict";var s=i("b727").forEach,n=i("a640"),a=i("ae40"),o=n("forEach"),r=a("forEach");t.exports=o&&r?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},1816:function(t,e,i){"use strict";(function(e){var s=i("440d"),n=i("9c59"),a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,r="[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]",h=new RegExp("^"+r+"+");function c(t){return(t||"").toString().replace(h,"")}var u=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function g(t){var i;i="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};var s=i.location||{};t=t||s;var n,o={},r=typeof t;if("blob:"===t.protocol)o=new d(unescape(t.pathname),{});else if("string"===r)for(n in o=new d(t,{}),l)delete o[n];else if("object"===r){for(n in t)n in l||(o[n]=t[n]);void 0===o.slashes&&(o.slashes=a.test(t.href))}return o}function p(t){t=c(t);var e=o.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function f(t,e){if(""===t)return e;var i=(e||"/").split("/").slice(0,-1).concat(t.split("/")),s=i.length,n=i[s-1],a=!1,o=0;while(s--)"."===i[s]?i.splice(s,1):".."===i[s]?(i.splice(s,1),o++):o&&(0===s&&(a=!0),i.splice(s,1),o--);return a&&i.unshift(""),"."!==n&&".."!==n||i.push(""),i.join("/")}function d(t,e,i){if(t=c(t),!(this instanceof d))return new d(t,e,i);var a,o,r,h,l,v,w=u.slice(),m=typeof e,b=this,y=0;for("object"!==m&&"string"!==m&&(i=e,e=null),i&&"function"!==typeof i&&(i=n.parse),e=g(e),o=p(t||""),a=!o.protocol&&!o.slashes,b.slashes=o.slashes||a&&e.slashes,b.protocol=o.protocol||e.protocol||"",t=o.rest,o.slashes||(w[3]=[/(.*)/,"pathname"]);y<w.length;y++)h=w[y],"function"!==typeof h?(r=h[0],v=h[1],r!==r?b[v]=t:"string"===typeof r?~(l=t.indexOf(r))&&("number"===typeof h[2]?(b[v]=t.slice(0,l),t=t.slice(l+h[2])):(b[v]=t.slice(l),t=t.slice(0,l))):(l=r.exec(t))&&(b[v]=l[1],t=t.slice(0,l.index)),b[v]=b[v]||a&&h[3]&&e[v]||"",h[4]&&(b[v]=b[v].toLowerCase())):t=h(t);i&&(b.query=i(b.query)),a&&e.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==e.pathname)&&(b.pathname=f(b.pathname,e.pathname)),s(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(h=b.auth.split(":"),b.username=h[0]||"",b.password=h[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}function v(t,e,i){var a=this;switch(t){case"query":"string"===typeof e&&e.length&&(e=(i||n.parse)(e)),a[t]=e;break;case"port":a[t]=e,s(e,a.protocol)?e&&(a.host=a.hostname+":"+e):(a.host=a.hostname,a[t]="");break;case"hostname":a[t]=e,a.port&&(e+=":"+a.port),a.host=e;break;case"host":a[t]=e,/:\d+$/.test(e)?(e=e.split(":"),a.port=e.pop(),a.hostname=e.join(":")):(a.hostname=e,a.port="");break;case"protocol":a.protocol=e.toLowerCase(),a.slashes=!i;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";a[t]=e.charAt(0)!==o?o+e:e}else a[t]=e;break;default:a[t]=e}for(var r=0;r<u.length;r++){var h=u[r];h[4]&&(a[h[1]]=a[h[1]].toLowerCase())}return a.origin=a.protocol&&a.host&&"file:"!==a.protocol?a.protocol+"//"+a.host:"null",a.href=a.toString(),a}function w(t){t&&"function"===typeof t||(t=n.stringify);var e,i=this,s=i.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var a=s+(i.slashes?"//":"");return i.username&&(a+=i.username,i.password&&(a+=":"+i.password),a+="@"),a+=i.host+i.pathname,e="object"===typeof i.query?t(i.query):i.query,e&&(a+="?"!==e.charAt(0)?"?"+e:e),i.hash&&(a+=i.hash),a}d.prototype={set:v,toString:w},d.extractProtocol=p,d.location=g,d.trimLeft=c,d.qs=n,t.exports=d}).call(this,i("c8ba"))},4160:function(t,e,i){"use strict";var s=i("23e7"),n=i("17c2");s({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"440d":function(t,e,i){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],t=+t,!t)return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},"593c":function(t,e,i){t.exports=i.p+"img/2.460c7cc1.jpg"},"5a21":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"bgCanvas"},[i("canvas",{ref:"bgCanvas"})]),i("div",{staticClass:"cutCanvas"},[i("canvas",{ref:"cutCanvas"})]),i("div",{staticClass:"shade"}),i("div",{staticClass:"slot_btn"},[i("div",{staticClass:"success",on:{click:t.success}},[t._v(" 成功 ")]),i("div",{staticClass:"cancel",on:{click:t.cancel}},[t._v("取消")])])])},n=[];i("4160"),i("d3b7"),i("159b");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}var h=i("1816"),c=i.n(h);function u(t){if(!t||"string"!==typeof t)throw new Error("url is required and should be string");if(!/^data:/.test(t)){var e=new c.a(t);return e.origin!==window.location.origin}return!1}var l=u;i("c975");Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var g=!1;function p(){}try{var f=Object.defineProperty({},"passive",{get:function(){return g=!0,!0}});window.addEventListener("testPassive",p,f),window.removeEventListener("testPassive",p,f)}catch(A){g=!1}function d(t){return t.scrollTop<=0}function v(t){return t.scrollHeight-t.scrollTop<=t.clientHeight}function w(t,e,i){if(!i)return!0;var s=t.clientX-e.clientX,n=t.clientY-e.clientY,a=Math.abs(s),o=Math.abs(n);return a<o}function m(t,e,i,s){var n=t[e],a=t[i];return!(a<=n)&&-1===["hidden","visible"].indexOf(getComputedStyle(t)[s])}function b(t){return m(t,"clientWidth","scrollWidth","overflowX")}var y=!1,C=null,S=null,x=!1,P=!1;function E(){y=!1,C=null,S=null,x=!1,P=!1}function L(t){var e=document.createElement("style");e.type="text/css",e.setAttribute("data-prevent-scroll","true"),e.textContent="".concat(t," { -webkit-overflow-scrolling: touch; }"),document.head.appendChild(e)}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.ignore,i=void 0===e?".scrollable":e;function s(t){if("string"===typeof i){S=t.target.closest(i),S&&(P=b(S));var e=t.touches[0],s=e.clientX,n=e.clientY;C={clientX:s,clientY:n}}x=t.target.closest("#__vconsole")}function n(t){if(!x){if("string"===typeof i){var e=t.touches[0],s=!0;if(S?(e.clientY<C.clientY&&w(e,C,P)&&v(S)||e.clientY>C.clientY&&w(e,C,P)&&d(S))&&(s=!1):s=!1,C={clientX:e.clientX,clientY:e.clientY},s)return}"function"===typeof i&&i(t.target)||t.cancelable&&t.preventDefault()}}function a(){S=null,x=!1}y=!0,L(i);var o=!!g&&{passive:!1};function r(){E(),window.removeEventListener("touchstart",s,o),window.removeEventListener("touchmove",n,o),window.removeEventListener("touchend",a,o)}return y&&r(),window.addEventListener("touchstart",s,o),window.addEventListener("touchmove",n,o),window.addEventListener("touchend",a,o),{cancel:r}}var O=k;O();var M=function(){function t(e){a(this,t),this.cutShape="rect",this.bgCanvas=null,this.cutCanvas=null,this.bgCtx=null,this.cutCtx=null,this.bgPos=null,this.cutPos=null,this.bgCanvas=null,this.cutCanvas=null,this.startImg={width:0,height:0,ratio:1,ratioW:1,ratioH:1},this.drawOption={img:"",sx:0,sy:0,sWidth:0,sHeight:0,x:0,y:0,width:0,height:0},this.img="",this.nowScale=1,this.minScale=1,this.touchStartFinger={},this.check(e),this.init(),this.isEvent()}return r(t,[{key:"init",value:function(){var t=this;this.createCanvas(),this.loadImageFrom(this.img).then((function(e){var i,s,n,a;switch(t.startImg={width:e.width,height:e.height,ratio:e.width/e.height,ratioW:e.width/t.bgPos.width,ratioH:e.height/t.bgPos.height},!0){case e.width>t.bgPos.width:i=t.bgPos.width,s=e.height/t.startImg.ratioW;break;case e.height>t.bgPos.height:s=t.bgPos.height,i=e.width/t.startImg.ratioH;break;default:i=e.width,s=e.height}var o=Math.min(s,i),r=Math.min(t.cutPos.width,t.cutPos.height);t.minScale=r/o,r>o&&(t.nowScale=t.minScale),n=(t.bgPos.width-i*t.nowScale)/2,a=(t.bgPos.height-s*t.nowScale)/2,t.drawOption={img:e,sx:0,sy:0,swidth:e.width,sheight:e.height,x:n,y:a,width:i,height:s,startx:n,starty:a},t._drawImage()}))}},{key:"check",value:function(t){if(!(t.bgCanvas instanceof HTMLElement&&t.cutCanvas instanceof HTMLElement))throw new Error("bgCanvas & cutCanvas 必须是一个DOM对象");if(!t.img)throw new Error("请传入img");t.cutShape&&(this.cutShape=t.cutShape),this.bgCanvas=t.bgCanvas,this.cutCanvas=t.cutCanvas,this.img=t.img}},{key:"createCanvas",value:function(){this.bgPos=this.bgCanvas.getBoundingClientRect(),this.cutPos=this.cutCanvas.getBoundingClientRect(),this.bgCtx=this.bgCanvas.getContext("2d"),this.cutCtx=this.cutCanvas.getContext("2d"),this.bgCanvas.width=this.bgPos.width,this.bgCanvas.height=this.bgPos.height,this.cutCanvas.width=this.cutPos.width,this.cutCanvas.height=this.cutPos.height,this.Shape()}},{key:"Shape",value:function(){var t=this;if("string"===typeof this.cutShape)switch(this.cutShape){case"arc":this.cutCtx.save(),this.cutCtx.arc(this.cutPos.width/2,this.cutPos.height/2,Math.min(this.cutPos.width,this.cutPos.height)/2,0,2*Math.PI,!1),this.cutCtx.restore(),this.cutCtx.clip();break;case"prismatic":this.cutCtx.save(),this.cutCtx.beginPath(),this.cutCtx.moveTo(this.cutPos.width/2,0),this.cutCtx.lineTo(0,this.cutPos.height/2),this.cutCtx.lineTo(this.cutPos.width/2,this.cutPos.height),this.cutCtx.lineTo(this.cutPos.width,this.cutPos.height/2),this.cutCtx.closePath(),this.cutCtx.restore(),this.cutCtx.clip()}else Array.isArray(this.cutShape)&&(this.cutCtx.save(),this.cutCtx.beginPath(),this.cutShape.forEach((function(e,i){0===i?t.cutCtx.moveTo(e.x,e.y):t.cutCtx.lineTo(e.x,e.y)})),this.cutCtx.closePath(),this.cutCtx.restore(),this.cutCtx.clip())}},{key:"loadImageFrom",value:function(t){return new Promise((function(e,i){var s=new Image;l(t)&&(s.crossOrigin="anonymous"),s.onload=function(){e(s)},s.onerror=function(){i(Error("fail to load image from ".concat(t)))},s.src=t}))}},{key:"_drawImage",value:function(){var t=this.drawOption;this.bgCtx.clearRect(0,0,this.bgPos.width,this.bgPos.height),this.bgCtx.drawImage(t.img,t.sx,t.sy,t.swidth,t.sheight,t.x,t.y,t.width*this.nowScale,t.height*this.nowScale);var e=1,i={x:this.cutPos.left-this.bgPos.left,y:this.cutPos.top-this.bgPos.top};switch(!0){case t.img.width>this.bgPos.width:e=this.startImg.ratioW;break;case t.img.height>this.bgPos.height:e=this.startImg.ratioH;break;default:e=1}var s={sx:(i.x-t.x)*e/this.nowScale,sy:(i.y-t.y)*e/this.nowScale,sWidth:this.cutPos.width*e/this.nowScale,sHeight:this.cutPos.height*e/this.nowScale};this.cutCtx.clearRect(0,0,this.cutPos.width,this.cutPos.height),this.cutCtx.drawImage(t.img,s.sx,s.sy,s.sWidth,s.sHeight,0,0,this.cutPos.width,this.cutPos.height)}},{key:"isrect",value:function(t,e){var i=Math.abs(this.bgPos.left-this.cutPos.left),s=-this.drawOption.width*this.nowScale+this.cutPos.right,n=Math.abs(this.bgPos.top-this.cutPos.top),a=-this.drawOption.height*this.nowScale+this.cutPos.bottom;t<s&&(t=s),e<a&&(e=a),t>i&&(t=i),e>n&&(e=n),this.drawOption.x=t,this.drawOption.y=e}},{key:"isEvent",value:function(){this.destroy(),document.ontouchstart=this.touchStart.bind(this),document.ontouchmove=this.touchMove.bind(this),document.ontouchend=this.touchEnd.bind(this)}},{key:"touchStart",value:function(t){var e=t.touches;1===e.length?this.touchStartFinger={pageX01:e[0].pageX,pageY01:e[0].pageY}:2===e.length&&(this.touchStartFinger={pageX01:e[0].pageX,pageY01:e[0].pageY,pageX02:e[1].pageX,pageY02:e[1].pageY})}},{key:"touchMove",value:function(t){var e=t.touches;if(1===e.length){var i=e[0].pageX,s=e[0].pageY,n=this.touchStartFinger.pageX01-i,a=this.touchStartFinger.pageY01-s;this.isrect(this.drawOption.x-n,this.drawOption.y-a),this._drawImage(),this.touchStartFinger={pageX01:i,pageY01:s}}else if(2===e.length){var o=t.touches[0].pageX,r=t.touches[0].pageY,h=t.touches[1].pageX,c=t.touches[1].pageY;this.touchStartFinger.pageX02=this.touchStartFinger.pageX02?this.touchStartFinger.pageX02:t.touches[1].pageX,this.touchStartFinger.pageY02=this.touchStartFinger.pageY02?this.touchStartFinger.pageY02:t.touches[1].pageY;var u=this.touchStartFinger,l=Math.pow(o-h,2)+Math.pow(r-c,2),g=Math.pow(u.pageX01-u.pageX02,2)+Math.pow(u.pageY01-u.pageY02,2);l=Math.sqrt(l),g=Math.sqrt(g);var p,f,d=this.nowScale+(l/g-1);this.nowScale=d<=this.minScale?this.minScale:d,p=this.drawOption.x-this.drawOption.width*(l/g-1)/2,f=this.drawOption.y-this.drawOption.height*(l/g-1)/2,this.nowScale>this.minScale&&this.isrect(p,f),this._drawImage(),this.touchStartFinger={pageX01:o,pageY01:r,pageX02:h,pageY02:c}}}},{key:"touchEnd",value:function(t){this.touchStartFinger.pageX01===t.changedTouches[0].pageX&&this.touchStartFinger.pageX02&&(this.touchStartFinger.pageX01=this.touchStartFinger.pageX02,this.touchStartFinger.pageY01=this.touchStartFinger.pageY02),this.isrect(this.drawOption.x,this.drawOption.y),this._drawImage()}},{key:"success",value:function(){this.bgCtx.clearRect(0,0,this.bgPos.width,this.bgPos.height);var t=this.cutCanvas.toDataURL("image/png");return this.destroy(),t}},{key:"destroy",value:function(){document.ontouchstart=null,document.ontouchmove=null,document.ontouchend=null}}]),t}(),X=M,Y={name:"CutImg",mounted:function(){this.$refs.cutCanvas.offsetWidth,this.$refs.cutCanvas.offsetHeight;this.CutImage=new X({bgCanvas:this.$refs.bgCanvas,cutCanvas:this.$refs.cutCanvas,img:i("593c"),cutShape:"arc"})},methods:{success:function(){this.CutImage.success()},cancel:function(){this.CutImage.destroy()}}},F=Y,I=(i("943f"),i("2877")),T=Object(I["a"])(F,s,n,!1,null,"16bd4fe9",null);e["default"]=T.exports},"65f0":function(t,e,i){var s=i("861d"),n=i("e8b5"),a=i("b622"),o=a("species");t.exports=function(t,e){var i;return n(t)&&(i=t.constructor,"function"!=typeof i||i!==Array&&!n(i.prototype)?s(i)&&(i=i[o],null===i&&(i=void 0)):i=void 0),new(void 0===i?Array:i)(0===e?0:e)}},"943f":function(t,e,i){"use strict";var s=i("9903"),n=i.n(s);n.a},9903:function(t,e,i){},"9c59":function(t,e,i){"use strict";var s,n=Object.prototype.hasOwnProperty;function a(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function o(t){var e,i=/([^=?&]+)=?([^&]*)/g,s={};while(e=i.exec(t)){var n=a(e[1]),o=a(e[2]);null===n||null===o||n in s||(s[n]=o)}return s}function r(t,e){e=e||"";var i,a,o=[];for(a in"string"!==typeof e&&(e="?"),t)if(n.call(t,a)){if(i=t[a],i||null!==i&&i!==s&&!isNaN(i)||(i=""),a=encodeURIComponent(a),i=encodeURIComponent(i),null===a||null===i)continue;o.push(a+"="+i)}return o.length?e+o.join("&"):""}e.stringify=r,e.parse=o},a640:function(t,e,i){"use strict";var s=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&s((function(){i.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,i){var s=i("83ab"),n=i("d039"),a=i("5135"),o=Object.defineProperty,r={},h=function(t){throw t};t.exports=function(t,e){if(a(r,t))return r[t];e||(e={});var i=[][t],c=!!a(e,"ACCESSORS")&&e.ACCESSORS,u=a(e,0)?e[0]:h,l=a(e,1)?e[1]:void 0;return r[t]=!!i&&!n((function(){if(c&&!s)return!0;var t={length:-1};c?o(t,1,{enumerable:!0,get:h}):t[1]=1,i.call(t,u,l)}))}},b727:function(t,e,i){var s=i("0366"),n=i("44ad"),a=i("7b0b"),o=i("50c4"),r=i("65f0"),h=[].push,c=function(t){var e=1==t,i=2==t,c=3==t,u=4==t,l=6==t,g=5==t||l;return function(p,f,d,v){for(var w,m,b=a(p),y=n(b),C=s(f,d,3),S=o(y.length),x=0,P=v||r,E=e?P(p,S):i?P(p,0):void 0;S>x;x++)if((g||x in y)&&(w=y[x],m=C(w,x,b),t))if(e)E[x]=m;else if(m)switch(t){case 3:return!0;case 5:return w;case 6:return x;case 2:h.call(E,w)}else if(u)return!1;return l?-1:c||u?u:E}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},c975:function(t,e,i){"use strict";var s=i("23e7"),n=i("4d64").indexOf,a=i("a640"),o=i("ae40"),r=[].indexOf,h=!!r&&1/[1].indexOf(1,-0)<0,c=a("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:h||!c||!u},{indexOf:function(t){return h?r.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,i){var s=i("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-2ef0bfda.9ec84bdd.js.map